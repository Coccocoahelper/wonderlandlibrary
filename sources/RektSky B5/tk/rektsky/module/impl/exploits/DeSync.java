/*
 * Decompiled with CFR 0.152.
 */
package tk.rektsky.module.impl.exploits;

import net.minecraft.network.play.client.C03PacketPlayer;
import net.minecraft.network.play.server.S08PacketPlayerPosLook;
import tk.rektsky.event.Event;
import tk.rektsky.event.impl.ClientTickEvent;
import tk.rektsky.event.impl.PacketReceiveEvent;
import tk.rektsky.event.impl.PacketSentEvent;
import tk.rektsky.module.Category;
import tk.rektsky.module.Module;
import tk.rektsky.module.settings.BooleanSetting;

public class DeSync
extends Module {
    public BooleanSetting auto = new BooleanSetting("Auto", true);

    public DeSync() {
        super("DeSync", "Makes it so you can't fall off", Category.EXPLOIT, false);
        this.settings.add(this.auto);
    }

    @Override
    public void onEvent(Event event) {
        boolean enabled = false;
        if (this.mc.thePlayer != null) {
            if (this.auto.getValue().booleanValue()) {
                if (this.mc.thePlayer.posY < -50.0) {
                    enabled = true;
                }
            } else {
                enabled = true;
            }
        }
        if (enabled) {
            if (event instanceof PacketReceiveEvent && ((PacketReceiveEvent)event).getPacket() instanceof S08PacketPlayerPosLook) {
                ((PacketReceiveEvent)event).setCanceled(true);
            }
            if (event instanceof PacketSentEvent && ((PacketSentEvent)event).getPacket() instanceof C03PacketPlayer) {
                ((PacketSentEvent)event).setCanceled(true);
            }
            if (event instanceof ClientTickEvent) {
                if (this.mc.thePlayer == null) {
                    return;
                }
                this.mc.thePlayer.motionY = 0.0;
            }
        }
    }
}

