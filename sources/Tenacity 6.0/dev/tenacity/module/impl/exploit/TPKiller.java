package dev.tenacity.module.impl.exploit;

import dev.tenacity.module.ModuleCategory;
import dev.tenacity.module.Module;
import dev.tenacity.event.IEventListener;
import dev.tenacity.event.impl.network.PacketReceiveEvent;
import net.minecraft.network.play.server.S02PacketChat;

public final class TPKiller extends Module {

    private final IEventListener<PacketReceiveEvent> packetReceiveEventEventListener = event -> {
        if (event.getPacket() instanceof S02PacketChat) {
            S02PacketChat s02PacketChat = (S02PacketChat) event.getPacket();
            if (s02PacketChat.getChatComponent().getUnformattedText().contains("tpa") || s02PacketChat.getChatComponent().getUnformattedText().contains("request")) {
                mc.thePlayer.setPosition(mc.thePlayer.posX, mc.thePlayer.posY - 6, mc.thePlayer.posZ);
                mc.thePlayer.sendChatMessage("/tpa accept");
                if (mc.thePlayer.ticksExisted % 2 == 0) {
                    mc.thePlayer.setPosition(mc.thePlayer.posX, mc.thePlayer.posY + 6, mc.thePlayer.posZ);
                }
            }
        }
    };

    public TPKiller() {
        super("TPKiller", "when someone tpas to you they will suffocate", ModuleCategory.EXPLOIT);
    }

}
