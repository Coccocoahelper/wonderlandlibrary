/*
 * Decompiled with CFR 0.152.
 */
package tk.rektsky.module.impl.exploits;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import net.minecraft.block.material.Material;
import net.minecraft.network.play.client.C07PacketPlayerDigging;
import net.minecraft.util.BlockPos;
import net.minecraft.util.EnumFacing;
import org.greenrobot.eventbus.Subscribe;
import tk.rektsky.event.impl.WorldTickEvent;
import tk.rektsky.module.Category;
import tk.rektsky.module.Module;
import tk.rektsky.utils.block.BlockUtils;

public class Nuker
extends Module {
    public Map<BlockPos, Integer> targets = new HashMap<BlockPos, Integer>();
    public List<BlockPos> loops = new ArrayList<BlockPos>();

    public Nuker() {
        super("Nuker", "Nuker, and it will keep breaking the block even when you are far away from it.", Category.EXPLOIT);
    }

    @Override
    public void onEnable() {
        this.targets.clear();
        this.loops.clear();
    }

    @Subscribe
    public void onTick(WorldTickEvent event) {
        for (BlockPos target : BlockUtils.getBlocks(5.0f)) {
            if (this.loops.contains(target)) continue;
            try {
                if (BlockUtils.getBlockMaterial(target) == Material.air) continue;
                this.mc.getNetHandler().addToSendQueue(new C07PacketPlayerDigging(C07PacketPlayerDigging.Action.START_DESTROY_BLOCK, target, EnumFacing.DOWN));
            }
            catch (Exception exception) {}
        }
    }

    @Override
    public void onDisable() {
        this.targets.clear();
    }
}

