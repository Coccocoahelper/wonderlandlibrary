package markgg.modules.impl.misc;

import markgg.event.Event;
import markgg.event.handler.EventHandler;
import markgg.event.handler.Listener;
import markgg.event.impl.PacketEvent;
import markgg.modules.Module;
import markgg.modules.ModuleInfo;
import markgg.settings.BooleanSetting;
import markgg.settings.NumberSetting;
import net.minecraft.network.Packet;
import net.minecraft.network.play.server.S08PacketPlayerPosLook;
import net.minecraft.network.play.server.S0EPacketSpawnObject;
import net.minecraft.network.play.server.S0FPacketSpawnMob;
import net.minecraft.network.play.server.S27PacketExplosion;
import net.minecraft.network.play.server.S2APacketParticles;
import net.minecraft.network.play.server.S2BPacketChangeGameState;

@ModuleInfo(name = "AntiExploit", category = Module.Category.MISC)
public class AntiExploit extends Module{

	@EventHandler
	private Listener<PacketEvent> eventListener = e -> {
		if(mc.thePlayer != null && mc.theWorld != null && e.getPacket() instanceof S0FPacketSpawnMob && mc.theWorld.loadedEntityList.size() > 500)
			e.setCancelled(true);
		if(e.getPacket() instanceof S08PacketPlayerPosLook) {
			if (Math.abs(((S08PacketPlayerPosLook) e.getPacket()).field_148940_a) > 3.0E7 || Math.abs(((S08PacketPlayerPosLook) e.getPacket()).field_148938_b) > 3.0E7 || Math.abs(((S08PacketPlayerPosLook) e.getPacket()).field_148939_c) > 3.0E7)
				e.setCancelled(true);
		}
		if(e.getPacket() instanceof S2APacketParticles) {
			if(((S2APacketParticles) e.getPacket()).func_149222_k() > 2024)
				e.setCancelled(true);
		}
		if(e.getPacket() instanceof S27PacketExplosion) {
			if (Math.abs(((S27PacketExplosion) e.getPacket()).func_149149_c()) > 100.0 || Math.abs(((S27PacketExplosion) e.getPacket()).func_149144_d()) > 100.0 || Math.abs(((S27PacketExplosion) e.getPacket()).func_149147_e()) > 100.0)
				e.setCancelled(true);
		}
		if (e.getPacket() instanceof S2BPacketChangeGameState) {
			if(((S2BPacketChangeGameState) e.getPacket()).field_149141_c == 5) {
				if(!mc.isDemo())
					e.setCancelled(true);

			}
		}
	};

}
